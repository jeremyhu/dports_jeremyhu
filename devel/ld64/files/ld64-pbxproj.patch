--- ld64.xcodeproj/project.pbxproj.orig	2012-01-03 14:27:16.000000000 -0800
+++ ld64.xcodeproj/project.pbxproj	2012-04-22 12:52:05.000000000 -0700
@@ -909,8 +909,9 @@
 				INSTALL_PATH = /usr/bin;
 				LINKER_DISPLAYS_MANGLED_NAMES = NO;
 				MACOSX_DEPLOYMENT_TARGET = "";
-				OTHER_CPLUSPLUSFLAGS = "$(OTHER_CPLUSPLUSFLAGS)";
-				OTHER_LDFLAGS = "-Wl,-lazy_library,/Developer/usr/lib/libLTO.dylib";
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
+				OTHER_LDFLAGS = "-Wl,-lazy_library,/Developer/usr/lib/libLTO.dylib MACPORTS_LD64_LDFLAGS";
 				PREBINDING = NO;
 				PRODUCT_NAME = ld;
 				SECTORDER_FLAGS = "";
@@ -966,10 +967,12 @@
 					"$(DEVELOPER_DIR)/usr/include",
 				);
 				INSTALL_PATH = /usr/bin;
-				OTHER_CPLUSPLUSFLAGS = "$(OTHER_CPLUSPLUSFLAGS)";
+ 				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+ 				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = (
 					"-Wl,-lazy_library,/Developer/usr/lib/libLTO.dylib",
 					"-Wl,-exported_symbol,__mh_execute_header",
+                                        "MACPORTS_LD64_LDFLAGS",
 				);
 				PREBINDING = NO;
 				PRODUCT_NAME = ld;
@@ -1006,6 +1009,8 @@
 					"$(DEVELOPER_DIR)/usr/local/include",
 				);
 				INSTALL_PATH = "$(HOME)/bin";
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-lazy_library,/Developer/usr/lib/libLTO.dylib";
 				OTHER_REZFLAGS = "";
 				PREBINDING = NO;
@@ -1033,6 +1038,8 @@
 					"$(DEVELOPER_DIR)/usr/local/include",
 				);
 				INSTALL_PATH = "$(HOME)/bin";
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-lazy_library,/Developer/usr/lib/libLTO.dylib";
 				OTHER_REZFLAGS = "";
 				PREBINDING = NO;
@@ -1050,6 +1057,8 @@
 			buildSettings = {
 				GCC_DYNAMIC_NO_PIC = NO;
 				GCC_TREAT_WARNINGS_AS_ERRORS = NO;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 			};
 			name = Debug;
 		};
@@ -1144,10 +1153,12 @@
 					"$(DEVELOPER_DIR)/usr/include",
 				);
 				INSTALL_PATH = /usr/bin;
-				OTHER_CPLUSPLUSFLAGS = "$(OTHER_CPLUSPLUSFLAGS)";
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = (
 					"-Wl,-lazy_library,/Developer/usr/lib/libLTO.dylib",
 					"-Wl,-exported_symbol,__mh_execute_header",
+					"MACPORTS_LD64_LDFLAGS",
 				);
 				PREBINDING = NO;
 				PRODUCT_NAME = ld;
@@ -1170,6 +1181,8 @@
 				GCC_PREPROCESSOR_DEFINITIONS = "$(GCC_PREPROCESSOR_DEFINITIONS_$(RC_RELEASE))";
 				HEADER_SEARCH_PATHS = "";
 				INSTALL_PATH = /usr/bin;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-exported_symbol,__mh_execute_header";
 				PREBINDING = NO;
 				PRODUCT_NAME = rebase;
@@ -1190,6 +1203,8 @@
 				GCC_WARN_TYPECHECK_CALLS_TO_PRINTF = YES;
 				HEADER_SEARCH_PATHS = "";
 				INSTALL_PATH = /usr/bin;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-exported_symbol,__mh_execute_header";
 				PREBINDING = NO;
 				PRODUCT_NAME = unwinddump;
@@ -1213,6 +1228,8 @@
 					"$(DEVELOPER_DIR)/usr/local/include",
 				);
 				INSTALL_PATH = "$(HOME)/bin";
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-lazy_library,/Developer/usr/lib/libLTO.dylib";
 				OTHER_REZFLAGS = "";
 				PREBINDING = NO;
@@ -1233,6 +1250,8 @@
 				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_MODEL_TUNING = G5;
 				HEADER_SEARCH_PATHS = "";
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = "$(HOME)/bin";
 				PREBINDING = NO;
 				PRODUCT_NAME = machocheck;
@@ -1248,6 +1267,8 @@
 				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_MODEL_TUNING = G5;
 				INSTALL_PATH = /usr/bin;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-exported_symbol,__mh_execute_header";
 				PREBINDING = NO;
 				PRODUCT_NAME = dyldinfo;
@@ -1266,6 +1287,8 @@
 				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_MODEL_TUNING = G5;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = /usr/local/lib;
 				PREBINDING = NO;
 				PRODUCT_NAME = prunetrie;
@@ -1291,6 +1314,8 @@
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
 				GCC_WARN_ABOUT_MISSING_PROTOTYPES = YES;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = /usr/local/lib;
 				PREBINDING = NO;
 				PRODUCT_NAME = prunetrie;
@@ -1306,6 +1331,8 @@
 				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_MODEL_TUNING = G5;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = /usr/local/lib;
 				PREBINDING = NO;
 				PRODUCT_NAME = prunetrie;
@@ -1344,6 +1371,8 @@
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_WARN_ABOUT_INVALID_OFFSETOF_MACRO = NO;
 				GCC_WARN_TYPECHECK_CALLS_TO_PRINTF = YES;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = "$(HOME)/bin";
 				PREBINDING = NO;
 				PRODUCT_NAME = unwinddump;
@@ -1361,6 +1390,8 @@
 				GCC_WARN_TYPECHECK_CALLS_TO_PRINTF = YES;
 				HEADER_SEARCH_PATHS = "";
 				INSTALL_PATH = /usr/bin;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-exported_symbol,__mh_execute_header";
 				PREBINDING = NO;
 				PRODUCT_NAME = unwinddump;
@@ -1388,6 +1419,8 @@
 				GCC_WARN_UNUSED_LABEL = NO;
 				GCC_WARN_UNUSED_VALUE = YES;
 				GCC_WARN_UNUSED_VARIABLE = YES;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = /usr/local/bin;
 				PREBINDING = NO;
 				PRODUCT_NAME = dyldinfo;
@@ -1404,6 +1437,8 @@
 				GCC_ENABLE_FIX_AND_CONTINUE = NO;
 				GCC_MODEL_TUNING = G5;
 				INSTALL_PATH = /usr/bin;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-exported_symbol,__mh_execute_header";
 				PREBINDING = NO;
 				PRODUCT_NAME = dyldinfo;
@@ -1421,6 +1456,8 @@
 				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_MODEL_TUNING = G5;
 				GCC_OPTIMIZATION_LEVEL = 0;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = "$(HOME)/bin";
 				PREBINDING = NO;
 				PRODUCT_NAME = machocheck;
@@ -1435,6 +1472,8 @@
 				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_MODEL_TUNING = G5;
 				HEADER_SEARCH_PATHS = "";
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = "$(HOME)/bin";
 				PREBINDING = NO;
 				PRODUCT_NAME = machocheck;
@@ -1450,6 +1489,8 @@
 				GCC_GENERATE_DEBUGGING_SYMBOLS = YES;
 				GCC_MODEL_TUNING = G5;
 				GCC_OPTIMIZATION_LEVEL = 0;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				INSTALL_PATH = "$(HOME)/bin";
 				PREBINDING = NO;
 				PRODUCT_NAME = rebase;
@@ -1466,6 +1507,8 @@
 				GCC_PREPROCESSOR_DEFINITIONS = "$(GCC_PREPROCESSOR_DEFINITIONS_$(RC_RELEASE))";
 				HEADER_SEARCH_PATHS = "";
 				INSTALL_PATH = /usr/bin;
+				OTHER_CFLAGS = "MACPORTS_CFLAGS";
+				OTHER_CPLUSPLUSFLAGS = "MACPORTS_CPLUSPLUSFLAGS";
 				OTHER_LDFLAGS = "-Wl,-exported_symbol,__mh_execute_header";
 				PREBINDING = NO;
 				PRODUCT_NAME = rebase;
